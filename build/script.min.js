function biasedRandomAlpha(t,e=.3){let n=4*(Math.random()-.5)*e;return Math.min(1,Math.max(0,t+n))}function drawPixelGrid(t){const e=document.getElementById("pixelGridCanvas"),n=e.getContext("2d");e.width=160,e.height=160;for(let e=0;e<20;e++)for(let i=0;i<20;i++){const o=biasedRandomAlpha(t[e][i],.4);n.fillStyle=`rgba(255, 152, 253, ${o})`,n.fillRect(8*i,8*e,8,8)}let i=null;requestAnimationFrame((function o(l){i||(i=l);const a=Math.min((l-i)/4e3,1),r=(c=a)*(2-c);var c;n.clearRect(0,0,e.width,e.height);for(let e=0;e<20;e++)for(let i=0;i<20;i++){const o=biasedRandomAlpha(t[e][i],.4),l=o+(t[e][i]-o)*r;n.fillStyle=`rgba(255, 152, 253, ${l})`,n.fillRect(8*i,8*e,8,8)}r<1&&requestAnimationFrame(o)}))}function startViewportFlicker(){const t=document.getElementById("viewportCanvas"),e=t.getContext("2d");t.width=window.innerWidth,t.height=window.innerHeight;const n=Math.ceil(t.width/8),i=Math.ceil(t.height/8);let o=0;const l=setInterval((function(){e.clearRect(0,0,t.width,t.height);const l=Math.min(o/1e3,1);for(let t=0;t<i;t++)for(let i=0;i<n;i++){const n=Math.random()*(.5-l)+l;e.fillStyle=`rgba(255, 152, 253, ${n})`,e.fillRect(8*i,8*t,8,8)}o+=100}),100);setTimeout((()=>{clearInterval(l),document.body.style.background="rgba(255, 152, 253, 1)";const e=document.getElementById("pixelGridCanvas");e&&e.remove(),t.remove()}),1e3)}fetch("full_opacity_values.json").then((t=>t.json())).then((t=>{drawPixelGrid(t),setTimeout(startViewportFlicker,3600)})).catch((t=>console.error("Error loading opacity values:",t)));